<!-- Wrapper -->
<div id="wrapper">

<!-- Header -->
<header id="header"{% if page.layout == "landing" %} class="alt style2"{% endif %}{% if page.layout == "home" %} class="alt"{% endif %}>
	<a href="{{ "" | absolute_url }}/" class="logo"><strong>{{ site.title }}</strong> <span>{{ site.subtitle }}</span></a>
	<nav>
		<a href="#menu">菜单</a>
		<div class="language-selector" style="display: inline-block; margin-left: 15px;">
			<select id="languageSelect" onchange="changeLanguage(this.value)" style="background: transparent; border: 1px solid #fff; color: #fff; padding: 5px;">
				<option value="cn">中文</option>
				<option value="en">English</option>
				<option value="tr">繁體中文</option>
			</select>
		</div>
	</nav>
</header>

<!-- Menu -->
<nav id="menu">
	<ul class="links">
        {% for page in site.pages %}
		    {% if page.layout == "home" %}
		        <li><a href="{{ "" | absolute_url }}/">{{ page.title }}</a></li>
	    	{% endif %}
		{% endfor %}
		{% for page in site.html_pages %}
		    {% if page.layout != "home" and page.nav-menu == true %}
		        <li><a href="{{ page.url | absolute_url }}">{{ page.title }}</a></li>
		    {% endif %}
		{% endfor %}
	</ul>
	<ul class="actions vertical">
		<li><a href="#" class="button special fit">开始使用</a></li>
<!--		<li><a href="#" class="button fit">Log In</a></li>-->
	</ul>
</nav>

<script>
function changeLanguage(lang) {
    // 获取当前URL路径
    let path = window.location.pathname;
    // 移除开头和结尾的斜杠
    path = path.replace(/^\/?|\/?$/g, '');
    // 分割路径
    let parts = path.split('/');
    
    // 检查当前URL是否已经包含语言代码
    if (['en', 'tr'].includes(parts[0])) {
        // 当前路径包含语言代码
        if (lang === 'cn') {
            // 切换到简体中文，移除语言代码
            parts.shift();
        } else {
            // 切换到其他语言，替换语言代码
            parts[0] = lang;
        }
    } else {
        // 当前路径不包含语言代码
        if (lang !== 'cn') {
            // 切换到非简体中文，添加语言代码
            parts.unshift(lang);
        }
        // 如果切换到简体中文，保持当前路径不变
    }
    
    // 重新组合URL并跳转
    let newPath = parts.length > 0 ? '/' + parts.join('/') : '/';
    window.location.href = newPath;
}

// 页面加载时设置当前语言
document.addEventListener('DOMContentLoaded', function() {
    let path = window.location.pathname;
    let lang = path.split('/')[1];
    if (['en', 'tr'].includes(lang)) {
        document.getElementById('languageSelect').value = lang;
    } else {
        document.getElementById('languageSelect').value = 'cn'; // 默认语言
    }
});
</script>
